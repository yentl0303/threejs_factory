{"ast":null,"code":"import * as THREE from 'three';\n// 城市模型材质修改\nexport default function modityCityMaterial(city) {\n  // 先计算\n  city.geometry.computeBoundingBox();\n  // 解构得到外边界矩形\n  let {\n    max,\n    min\n  } = city.geometry.boundingBox;\n  // 最高点减去最低点得到高度差\n  let uHeight = max.y - min.y;\n  console.log(uHeight);\n  // 修改城市模型着色器\n  city.material.onBeforeCompile = shader => {\n    // 最高点的颜色\n    shader.uniform.uTopColor = {\n      value: new THREE.Color('#ffffff')\n    };\n\n    // 高度差\n    shader.uniform.uHeight = {\n      value: uHeight\n    };\n    console.log(shader.vertexShader);\n    console.log(shader.fragmentShader);\n  };\n}","map":{"version":3,"names":["THREE","modityCityMaterial","city","geometry","computeBoundingBox","max","min","boundingBox","uHeight","y","console","log","material","onBeforeCompile","shader","uniform","uTopColor","value","Color","vertexShader","fragmentShader"],"sources":["D:/vscodeDemo/threeDemo/threejs_smartcity/src/threeModal/modity/modityCityMaterial.js"],"sourcesContent":["import * as THREE from 'three'\r\n// 城市模型材质修改\r\nexport default function modityCityMaterial(city) {\r\n  // 先计算\r\n  city.geometry.computeBoundingBox();\r\n  // 解构得到外边界矩形\r\n  let {max, min} = city.geometry.boundingBox;\r\n  // 最高点减去最低点得到高度差\r\n  let uHeight = max.y - min.y;\r\n  console.log(uHeight);\r\n  // 修改城市模型着色器\r\n  city.material.onBeforeCompile = shader => {\r\n    // 最高点的颜色\r\n    shader.uniform.uTopColor = {\r\n      value: new THREE.Color('#ffffff')\r\n    }\r\n\r\n    // 高度差\r\n    shader.uniform.uHeight = {\r\n      value: uHeight\r\n    }\r\n    console.log(shader.vertexShader)\r\n    console.log(shader.fragmentShader)\r\n  }\r\n} "],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B;AACA,eAAe,SAASC,kBAAkB,CAACC,IAAI,EAAE;EAC/C;EACAA,IAAI,CAACC,QAAQ,CAACC,kBAAkB,EAAE;EAClC;EACA,IAAI;IAACC,GAAG;IAAEC;EAAG,CAAC,GAAGJ,IAAI,CAACC,QAAQ,CAACI,WAAW;EAC1C;EACA,IAAIC,OAAO,GAAGH,GAAG,CAACI,CAAC,GAAGH,GAAG,CAACG,CAAC;EAC3BC,OAAO,CAACC,GAAG,CAACH,OAAO,CAAC;EACpB;EACAN,IAAI,CAACU,QAAQ,CAACC,eAAe,GAAGC,MAAM,IAAI;IACxC;IACAA,MAAM,CAACC,OAAO,CAACC,SAAS,GAAG;MACzBC,KAAK,EAAE,IAAIjB,KAAK,CAACkB,KAAK,CAAC,SAAS;IAClC,CAAC;;IAED;IACAJ,MAAM,CAACC,OAAO,CAACP,OAAO,GAAG;MACvBS,KAAK,EAAET;IACT,CAAC;IACDE,OAAO,CAACC,GAAG,CAACG,MAAM,CAACK,YAAY,CAAC;IAChCT,OAAO,CAACC,GAAG,CAACG,MAAM,CAACM,cAAc,CAAC;EACpC,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}