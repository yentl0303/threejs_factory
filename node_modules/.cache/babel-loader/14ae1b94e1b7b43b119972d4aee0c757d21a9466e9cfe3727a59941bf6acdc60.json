{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as THREE from 'three';\nimport camera from '../camera';\nimport LineRader from './lineRader';\nexport default class ALarm {\n  constructor() {\n    const textureLoad = new THREE.TextureLoader();\n    const texture = textureLoad.load('./svg/警告.svg');\n    this.material = new THREE.SpriteMaterial({\n      map: texture\n    });\n    this.mesh = new THREE.Sprite(this.material);\n    this.mesh.position.set(-3, 1, 0.3);\n    this.mesh.scale.set(0.3, 0.3, 0.3);\n\n    // 只有射线射到警告这里，点击事件才能执行, 设置物体碰撞\n    this.lineRader = new LineRader();\n    this.mouse = new THREE.Vector2();\n    // 封装点击事件\n    this.fns = [];\n\n    // 事件监听\n    window.addEventListener('click', event => {\n      // -1到1\n      this.mouse.x = event.clientX / window.innerWidth * 2 - 1;\n      this.mouse.y = -(event.clienty / window.innerHeight * 2 - 1);\n\n      // 设置相机\n      this.lineRader.setFromCamera(this.mouse, camera);\n      const intersects = this.lineRader.intersectObject(this.mesh);\n      this.fns.forEach(item => {\n        item(event);\n      });\n    });\n  }\n  onClick(fn) {\n    this.fns.push(fn);\n  }\n}","map":{"version":3,"names":["THREE","camera","LineRader","ALarm","constructor","textureLoad","TextureLoader","texture","load","material","SpriteMaterial","map","mesh","Sprite","position","set","scale","lineRader","mouse","Vector2","fns","window","addEventListener","event","x","clientX","innerWidth","y","clienty","innerHeight","setFromCamera","intersects","intersectObject","forEach","item","onClick","fn","push"],"sources":["D:/vscodeDemo/threeDemo/threejs_smartcity/src/threeModal/mesh/alarm.js"],"sourcesContent":["import * as THREE from 'three'\r\nimport camera from '../camera'\r\nimport LineRader from './lineRader'\r\nexport default class ALarm {\r\n  constructor () {\r\n    const textureLoad = new THREE.TextureLoader()\r\n    const texture =  textureLoad.load('./svg/警告.svg')\r\n    this.material = new THREE.SpriteMaterial({ map: texture })\r\n\r\n    this.mesh = new THREE.Sprite(this.material)\r\n\r\n    this.mesh.position.set(-3, 1, 0.3)\r\n    this.mesh.scale.set(0.3, 0.3, 0.3)\r\n\r\n    // 只有射线射到警告这里，点击事件才能执行, 设置物体碰撞\r\n    this.lineRader = new LineRader()\r\n    this.mouse = new THREE.Vector2()\r\n    // 封装点击事件\r\n    this.fns = []\r\n\r\n    // 事件监听\r\n    window.addEventListener('click', event => {\r\n      // -1到1\r\n      this.mouse.x = (event.clientX / window.innerWidth) * 2 -1\r\n      this.mouse.y = - ((event.clienty / window.innerHeight) * 2 -1)\r\n\r\n      // 设置相机\r\n      this.lineRader.setFromCamera(this.mouse, camera)\r\n\r\n      const intersects = this.lineRader.intersectObject(this.mesh)\r\n      this.fns.forEach(item => {\r\n        item(event);\r\n      })\r\n    })\r\n  }\r\n  onClick(fn) {\r\n    this.fns.push(fn)\r\n  }\r\n}\r\n"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,MAAM,MAAM,WAAW;AAC9B,OAAOC,SAAS,MAAM,aAAa;AACnC,eAAe,MAAMC,KAAK,CAAC;EACzBC,WAAW,GAAI;IACb,MAAMC,WAAW,GAAG,IAAIL,KAAK,CAACM,aAAa,EAAE;IAC7C,MAAMC,OAAO,GAAIF,WAAW,CAACG,IAAI,CAAC,cAAc,CAAC;IACjD,IAAI,CAACC,QAAQ,GAAG,IAAIT,KAAK,CAACU,cAAc,CAAC;MAAEC,GAAG,EAAEJ;IAAQ,CAAC,CAAC;IAE1D,IAAI,CAACK,IAAI,GAAG,IAAIZ,KAAK,CAACa,MAAM,CAAC,IAAI,CAACJ,QAAQ,CAAC;IAE3C,IAAI,CAACG,IAAI,CAACE,QAAQ,CAACC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC;IAClC,IAAI,CAACH,IAAI,CAACI,KAAK,CAACD,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;;IAElC;IACA,IAAI,CAACE,SAAS,GAAG,IAAIf,SAAS,EAAE;IAChC,IAAI,CAACgB,KAAK,GAAG,IAAIlB,KAAK,CAACmB,OAAO,EAAE;IAChC;IACA,IAAI,CAACC,GAAG,GAAG,EAAE;;IAEb;IACAC,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAEC,KAAK,IAAI;MACxC;MACA,IAAI,CAACL,KAAK,CAACM,CAAC,GAAID,KAAK,CAACE,OAAO,GAAGJ,MAAM,CAACK,UAAU,GAAI,CAAC,GAAE,CAAC;MACzD,IAAI,CAACR,KAAK,CAACS,CAAC,GAAG,EAAIJ,KAAK,CAACK,OAAO,GAAGP,MAAM,CAACQ,WAAW,GAAI,CAAC,GAAE,CAAC,CAAC;;MAE9D;MACA,IAAI,CAACZ,SAAS,CAACa,aAAa,CAAC,IAAI,CAACZ,KAAK,EAAEjB,MAAM,CAAC;MAEhD,MAAM8B,UAAU,GAAG,IAAI,CAACd,SAAS,CAACe,eAAe,CAAC,IAAI,CAACpB,IAAI,CAAC;MAC5D,IAAI,CAACQ,GAAG,CAACa,OAAO,CAACC,IAAI,IAAI;QACvBA,IAAI,CAACX,KAAK,CAAC;MACb,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EACAY,OAAO,CAACC,EAAE,EAAE;IACV,IAAI,CAAChB,GAAG,CAACiB,IAAI,CAACD,EAAE,CAAC;EACnB;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}