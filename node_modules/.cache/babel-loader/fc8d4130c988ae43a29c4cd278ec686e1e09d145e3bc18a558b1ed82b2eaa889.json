{"ast":null,"code":"import * as THREE from 'three';\nimport vertex from '@/shader/lineWall/vertexShader.glsl';\nimport fragment from '@/shader/lineWall/fragmentShader.glsl';\nimport gsap from 'gsap';\nexport default class LineWall {\n  constructor(radiusW = 2, radiusH = 0.5, scale = 2, position = {\n    x: 0,\n    z: 0\n  }, color = 0xCC0033) {\n    // 创建圆柱几何体\n    this.geometry = new THREE.CylinderGeometry(radius, radius, 1, 32, 1, true);\n    this.material = new THREE.ShaderMaterial({\n      vertexShader: vertex,\n      fragmentShader: fragment,\n      transparent: true,\n      side: THREE.DoubleSide\n    });\n    this.mesh = new THREE.Mesh(this.geometry, this.material);\n    this.mesh.position.set(position.x, 0.5, position.z);\n    // 计算模型的边距\n    this.mesh.geometry.computeBoundingBox();\n    let {\n      max,\n      min\n    } = this.mesh.geometry.boundingBox;\n    const uHeight = max.y - min.y;\n    this.material.uniforms.uHeight = {\n      value: uHeight\n    };\n    this.material.uniforms.uColor = {\n      value: new THREE.Color(color)\n    };\n    gsap.to(this.mesh.scale, {\n      x: scale,\n      z: scale,\n      duration: 2,\n      ease: 'none',\n      repeat: -1,\n      yoyo: true\n    });\n  }\n  onRemove() {\n    this.mesh.remove();\n    this.mesh.removeFromParent();\n    this.mesh.material.dispose();\n    this.mesh.geometry.dispose();\n  }\n}","map":{"version":3,"names":["THREE","vertex","fragment","gsap","LineWall","constructor","radiusW","radiusH","scale","position","x","z","color","geometry","CylinderGeometry","radius","material","ShaderMaterial","vertexShader","fragmentShader","transparent","side","DoubleSide","mesh","Mesh","set","computeBoundingBox","max","min","boundingBox","uHeight","y","uniforms","value","uColor","Color","to","duration","ease","repeat","yoyo","onRemove","remove","removeFromParent","dispose"],"sources":["D:/vscodeDemo/threeDemo/threejs_smartcity/src/threeModal/mesh/lineWall.js"],"sourcesContent":["import * as THREE from 'three'\r\nimport vertex from '@/shader/lineWall/vertexShader.glsl'\r\nimport fragment from '@/shader/lineWall/fragmentShader.glsl'\r\nimport gsap from 'gsap'\r\nexport default class LineWall{\r\n  constructor(radiusW = 2, radiusH = 0.5, scale = 2, position = {x: 0, z: 0}, color = 0xCC0033) {\r\n    // 创建圆柱几何体\r\n    this.geometry = new THREE.CylinderGeometry(radius, radius, 1, 32, 1, true)\r\n    this.material = new THREE.ShaderMaterial({\r\n      vertexShader: vertex,\r\n      fragmentShader: fragment,\r\n      transparent: true,\r\n      side: THREE.DoubleSide\r\n    })\r\n\r\n    this.mesh = new THREE.Mesh(this.geometry, this.material)\r\n    this.mesh.position.set(position.x, 0.5, position.z)\r\n    // 计算模型的边距\r\n    this.mesh.geometry.computeBoundingBox()\r\n    let {max, min} = this.mesh.geometry.boundingBox\r\n    const uHeight = max.y - min.y\r\n    this.material.uniforms.uHeight = {\r\n      value: uHeight\r\n    }\r\n    this.material.uniforms.uColor = {\r\n      value: new THREE.Color(color)\r\n    }\r\n    gsap.to(this.mesh.scale, {\r\n      x: scale,\r\n      z: scale,\r\n      duration: 2,\r\n      ease: 'none',\r\n      repeat: -1,\r\n      yoyo: true\r\n    })\r\n  }\r\n  onRemove() {\r\n    this.mesh.remove()\r\n    this.mesh.removeFromParent()\r\n    this.mesh.material.dispose()\r\n    this.mesh.geometry.dispose()\r\n  }\r\n}"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,MAAM,MAAM,qCAAqC;AACxD,OAAOC,QAAQ,MAAM,uCAAuC;AAC5D,OAAOC,IAAI,MAAM,MAAM;AACvB,eAAe,MAAMC,QAAQ;EAC3BC,WAAW,CAACC,OAAO,GAAG,CAAC,EAAEC,OAAO,GAAG,GAAG,EAAEC,KAAK,GAAG,CAAC,EAAEC,QAAQ,GAAG;IAACC,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAC,CAAC,EAAEC,KAAK,GAAG,QAAQ,EAAE;IAC5F;IACA,IAAI,CAACC,QAAQ,GAAG,IAAIb,KAAK,CAACc,gBAAgB,CAACC,MAAM,EAAEA,MAAM,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC;IAC1E,IAAI,CAACC,QAAQ,GAAG,IAAIhB,KAAK,CAACiB,cAAc,CAAC;MACvCC,YAAY,EAAEjB,MAAM;MACpBkB,cAAc,EAAEjB,QAAQ;MACxBkB,WAAW,EAAE,IAAI;MACjBC,IAAI,EAAErB,KAAK,CAACsB;IACd,CAAC,CAAC;IAEF,IAAI,CAACC,IAAI,GAAG,IAAIvB,KAAK,CAACwB,IAAI,CAAC,IAAI,CAACX,QAAQ,EAAE,IAAI,CAACG,QAAQ,CAAC;IACxD,IAAI,CAACO,IAAI,CAACd,QAAQ,CAACgB,GAAG,CAAChB,QAAQ,CAACC,CAAC,EAAE,GAAG,EAAED,QAAQ,CAACE,CAAC,CAAC;IACnD;IACA,IAAI,CAACY,IAAI,CAACV,QAAQ,CAACa,kBAAkB,EAAE;IACvC,IAAI;MAACC,GAAG;MAAEC;IAAG,CAAC,GAAG,IAAI,CAACL,IAAI,CAACV,QAAQ,CAACgB,WAAW;IAC/C,MAAMC,OAAO,GAAGH,GAAG,CAACI,CAAC,GAAGH,GAAG,CAACG,CAAC;IAC7B,IAAI,CAACf,QAAQ,CAACgB,QAAQ,CAACF,OAAO,GAAG;MAC/BG,KAAK,EAAEH;IACT,CAAC;IACD,IAAI,CAACd,QAAQ,CAACgB,QAAQ,CAACE,MAAM,GAAG;MAC9BD,KAAK,EAAE,IAAIjC,KAAK,CAACmC,KAAK,CAACvB,KAAK;IAC9B,CAAC;IACDT,IAAI,CAACiC,EAAE,CAAC,IAAI,CAACb,IAAI,CAACf,KAAK,EAAE;MACvBE,CAAC,EAAEF,KAAK;MACRG,CAAC,EAAEH,KAAK;MACR6B,QAAQ,EAAE,CAAC;MACXC,IAAI,EAAE,MAAM;MACZC,MAAM,EAAE,CAAC,CAAC;MACVC,IAAI,EAAE;IACR,CAAC,CAAC;EACJ;EACAC,QAAQ,GAAG;IACT,IAAI,CAAClB,IAAI,CAACmB,MAAM,EAAE;IAClB,IAAI,CAACnB,IAAI,CAACoB,gBAAgB,EAAE;IAC5B,IAAI,CAACpB,IAAI,CAACP,QAAQ,CAAC4B,OAAO,EAAE;IAC5B,IAAI,CAACrB,IAAI,CAACV,QAAQ,CAAC+B,OAAO,EAAE;EAC9B;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}